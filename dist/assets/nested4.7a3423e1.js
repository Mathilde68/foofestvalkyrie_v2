import"./style.7f2dd081.js";const g={stage:"stagename",day:"day",fullDay:"",start:"",end:"",artist:""},y=[],i={filterDay:"mon",filterStage:"Midgard"};window.addEventListener("DOMContentLoaded",h);const f=window.matchMedia("(min-width: 768px)"),p=document.querySelector("#schedule-form"),m=p.elements.day;function h(){console.log("started"),m.addEventListener("input",w),document.querySelectorAll("[data-action='filter']").forEach(t=>t.addEventListener("click",C)),D()}async function D(){const o=await(await fetch("https://valkyriefest.herokuapp.com/schedule")).json();console.log(o),q(o)}function q(t){Object.entries(t).forEach(o=>{Object.entries(o[1]).forEach(s=>{Object.entries(s[1]).forEach(r=>{const a=Object.create(g);a.stage=o[0],a.day=s[0],a.start=r[1].start,a.end=r[1].end,a.artist=r[1].act;let n;a.day==="tue"?n=a.day+"sday":a.day==="wed"?n=a.day+"nesday":a.day==="thu"?n=a.day+"rsday":a.day==="sat"?n=a.day+"urday":n=a.day+"day",a.fullDay=n.charAt(0).toUpperCase()+n.slice(1),y.push(a)})})}),l()}function w(){const e=m.value;console.log(`user selected: ${e}`),L(e)}function L(t){i.filterDay=t,l()}function S(t){i.filterDay==="mon"?t=t.filter(e):i.filterDay==="tue"?t=t.filter(o):i.filterDay==="wed"?t=t.filter(c):i.filterDay==="thu"?t=t.filter(s):i.filterDay==="fri"?t=t.filter(u):i.filterDay==="sat"?t=t.filter(r):i.filterDay==="sun"&&(t=t.filter(a));function e(n){return n.day==="mon"}function o(n){return n.day==="tue"}function c(n){return n.day==="wed"}function s(n){return n.day==="thu"}function u(n){return n.day==="fri"}function r(n){return n.day==="sat"}function a(n){return n.day==="sun"}return t}function C(t){const e=t.target.dataset.filter;console.log(`user selected: ${e}`),M(e)}function M(t){i.filterStage=t,l()}function b(t){i.filterStage==="Midgard"?t=t.filter(e):i.filterStage==="Vanaheim"?t=t.filter(o):i.filterStage==="Jotunheim"&&(t=t.filter(c));function e(s){return s.stage==="Midgard"}function o(s){return s.stage==="Vanaheim"}function c(s){return s.stage==="Jotunheim"}return t}function l(){const t=S(y),e=b(t);f.matches?(d(t),console.log(t)):(d(e),console.log(e))}function d(t){document.querySelector("#list1").innerHTML="",document.querySelector("#list2").innerHTML="",document.querySelector("#list3").innerHTML="",t.forEach(E)}function E(t){if(document.querySelector("#activeDay").textContent=t.fullDay,t.artist!=="break"){const e=document.querySelector("template").content.cloneNode(!0);e.querySelector("#artist").textContent=t.artist,e.querySelector("#time").textContent=`${t.start} - ${t.end}`,e.querySelector("#artist").addEventListener("click",v),f.matches?(t.stage=="Midgard"&&document.querySelector("#list1").appendChild(e),t.stage=="Vanaheim"&&document.querySelector("#list2").appendChild(e),t.stage=="Jotunheim"&&document.querySelector("#list3").appendChild(e)):(document.querySelector("#list1").appendChild(e),document.querySelector("#table1 .table-title").textContent=i.filterStage)}}function v(){const t=this.textContent;console.log(t),window.location.href=`single.html?id=${t}`}
